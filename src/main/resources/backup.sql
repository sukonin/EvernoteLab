SET DB_CLOSE_DELAY -1;
;
CREATE USER IF NOT EXISTS SA SALT 'ae5690acf6f3481f' HASH 'e04c7d85443e76637bf2f40fd5a925e32d9786be238f1dbf83b481704a2ec2bd' ADMIN;
CREATE SEQUENCE PUBLIC.HIBERNATE_SEQUENCE START WITH 15;
CREATE MEMORY TABLE PUBLIC.NOTE(
ID BIGINT NOT NULL,
CONTENT VARCHAR (500),
DATE DATE NOT NULL,
ISACTIVE BOOLEAN NOT NULL,
TITLE VARCHAR (255) NOT NULL,
NOTEBOOK_ID BIGINT NOT NULL
);
ALTER TABLE PUBLIC.NOTE
  ADD CONSTRAINT PUBLIC.CONSTRAINT_2 PRIMARY KEY (ID);
-- 10 +/- SELECT COUNT(*) FROM PUBLIC.NOTE;    
INSERT INTO PUBLIC.NOTE (ID, CONTENT, DATE, ISACTIVE, TITLE, NOTEBOOK_ID) VALUES
  (1, 'content for 1 user', DATE '2012-06-18', TRUE, 'title1', 1),
  (2, 'content for 1 user', DATE '2012-06-18', FALSE, 'title2', 1),
  (3, 'content for 1 user', DATE '2012-06-18', TRUE, 'title3', 1),
  (4, 'content for 1 user', DATE '2012-06-18', FALSE, 'title1', 2),
  (5, 'content for 1 user', DATE '2012-06-18', TRUE, 'title2', 2),
  (6, 'content for 1 user', DATE '2012-06-18', FALSE, 'title3', 2),
  (7, 'content for 2 user', DATE '2012-06-18', TRUE, 'title1', 3),
  (8, 'content for 2 user', DATE '2012-06-18', FALSE, 'title2', 4),
  (9, 'content for 3 user', DATE '2012-06-18', TRUE, 'title3', 5),
  (10, 'content1 for 3 user', DATE '2012-06-18', FALSE, 'title1', 6);
CREATE MEMORY TABLE PUBLIC.NOTE_TAG(
NOTE_ID BIGINT NOT NULL,
TAG_ID BIGINT NOT NULL
);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.NOTE_TAG; 
CREATE MEMORY TABLE PUBLIC.NOTEBOOK(
ID BIGINT NOT NULL,
TITLE VARCHAR (255) NOT NULL,
USER_ID BIGINT NOT NULL
);
ALTER TABLE PUBLIC.NOTEBOOK
  ADD CONSTRAINT PUBLIC.CONSTRAINT_8 PRIMARY KEY (ID);
-- 14 +/- SELECT COUNT(*) FROM PUBLIC.NOTEBOOK;
INSERT INTO PUBLIC.NOTEBOOK (ID, TITLE, USER_ID) VALUES
  (1, 'title', 1),
  (2, 'title2', 1),
  (3, 'title', 2),
  (4, 'title2', 2),
  (5, 'title1', 3),
  (6, 'title2', 3),
  (7, 'title1', 4),
  (8, 'title2', 4),
  (9, 'title1', 5),
  (10, 'title2', 5),
  (11, 'title3', 5),
  (12, 'title4', 5),
  (13, 'title1', 6),
  (14, 'title1', 7);
CREATE MEMORY TABLE PUBLIC.TAG(
ID BIGINT NOT NULL,
TAG VARCHAR (255),
USER_ID BIGINT
);
ALTER TABLE PUBLIC.TAG
  ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY (ID);
-- 10 +/- SELECT COUNT(*) FROM PUBLIC.TAG;     
INSERT INTO PUBLIC.TAG (ID, TAG, USER_ID) VALUES
  (1, 'priority', 1),
  (2, 'home', 1),
  (3, 'vacation', 1),
  (4, 'work', 2),
  (5, 'holiday', 2),
  (6, 'dream', 2),
  (7, 'todo', 1),
  (8, 'what', 1),
  (9, 'F@ck', 1),
  (10, '05.42am...', 2);
CREATE MEMORY TABLE PUBLIC.USER(
ID BIGINT NOT NULL,
EMAIL VARCHAR (255),
PASSWORD VARCHAR (255),
USERNAME VARCHAR (255) NOT NULL
);
ALTER TABLE PUBLIC.USER
  ADD CONSTRAINT PUBLIC.CONSTRAINT_27 PRIMARY KEY (ID);
-- 7 +/- SELECT COUNT(*) FROM PUBLIC.USER;     
INSERT INTO PUBLIC.USER (ID, EMAIL, PASSWORD, USERNAME) VALUES
  (1, '1@epam.com', 'pass', 'testname1'),
  (2, '2@epam.com', 'pass', 'testname2'),
  (3, '3@epam.com', 'pass', 'testname3'),
  (4, '4@epam.com', 'pass', 'testname1'),
  (5, '5@epam.com', 'pass', 'testname1'),
  (6, '6@epam.com', 'pass', 'testname2'),
  (7, '7@epam.com', 'pass', 'testname5'),
  (8, 'test', '$2a$10$BkvDRdJxR/CLu9ThLBvBX.RyrB3D2sDuWuB8aEDROMRSWQOdosIRK', 'test');
ALTER TABLE PUBLIC.USER
  ADD CONSTRAINT PUBLIC.UK_E6GKQUNXAJVYXL5UCTPL2VL2P UNIQUE (EMAIL);
ALTER TABLE PUBLIC.TAG
  ADD CONSTRAINT PUBLIC.UK_KSGIQ3BB8Y7WQOXLCDINE0DS7 UNIQUE (TAG);
ALTER TABLE PUBLIC.NOTE_TAG
  ADD CONSTRAINT PUBLIC.FKQDGRK15R405UEQ8YCXG5QT1X FOREIGN KEY (NOTE_ID) REFERENCES PUBLIC.NOTE (ID) NOCHECK;
ALTER TABLE PUBLIC.NOTEBOOK
  ADD CONSTRAINT PUBLIC.FK8IQODGORYA8O2AWMRBE8EKIIN FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USER (ID) NOCHECK;
ALTER TABLE PUBLIC.TAG
  ADD CONSTRAINT PUBLIC.FKDU7I3B6B914U19LLHKYHLN2M8 FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USER (ID) NOCHECK;
ALTER TABLE PUBLIC.NOTE_TAG
  ADD CONSTRAINT PUBLIC.FKGQUFY5G5ERS1T4BVHJJSYAEVT FOREIGN KEY (TAG_ID) REFERENCES PUBLIC.TAG (ID) NOCHECK;
ALTER TABLE PUBLIC.NOTE
  ADD CONSTRAINT PUBLIC.FKLKEGY1FI7Y516JRA1MEFTNP56 FOREIGN KEY (NOTEBOOK_ID) REFERENCES PUBLIC.NOTEBOOK (ID) NOCHECK;
